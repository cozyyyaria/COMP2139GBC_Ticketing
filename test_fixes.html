<!DOCTYPE html>
<html>
<head>
    <title>Test Event & Purchase Fixes</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .step { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; }
    </style>
</head>
<body>
    <h1>🧪 Test Event & Purchase Fixes</h1>
    
    <div class="step info">
        <h3>✅ Issue 1: Available Tickets Not Decreasing</h3>
        <p><strong>Fixed:</strong> Added debug logging and proper ticket price assignment</p>
        <p><strong>Test:</strong></p>
        <ol>
            <li>Go to <a href="http://localhost:5128/Event" target="_blank">Events page</a></li>
            <li>Click "Buy" on any event</li>
            <li>Enter guest info and quantity (e.g., 2 tickets)</li>
            <li>Submit the purchase</li>
            <li>Go back to Events page and check if available tickets decreased</li>
        </ol>
    </div>
    
    <div class="step info">
        <h3>✅ Issue 2: Delete Event Not Working</h3>
        <p><strong>Fixed:</strong> Updated form action and added proper error handling</p>
        <p><strong>Test:</strong></p>
        <ol>
            <li>Go to <a href="http://localhost:5128/Event" target="_blank">Events page</a></li>
            <li>Click "Delete" on any event</li>
            <li>Confirm deletion in the delete page</li>
            <li>Should redirect back to Events list</li>
        </ol>
    </div>
    
    <div class="step info">
        <h3>✅ Issue 3: Purchases Not Updating</h3>
        <p><strong>Fixed:</strong> Added proper validation and error handling</p>
        <p><strong>Test:</strong></p>
        <ol>
            <li>Make a purchase (follow Issue 1 steps)</li>
            <li>Go to <a href="http://localhost:5128/Purchase" target="_blank">Purchases page</a></li>
            <li>Your purchase should appear in the list</li>
        </ol>
    </div>
    
    <div class="step success">
        <h3>🎯 Complete Test Flow</h3>
        <ol>
            <li><strong>Create Event:</strong> <a href="http://localhost:5128/Event/Create" target="_blank">Create a new event</a></li>
            <li><strong>Buy Tickets:</strong> Click "Buy" on the event and purchase 2 tickets</li>
            <li><strong>Verify Tickets Decreased:</strong> Check that available tickets decreased by 2</li>
            <li><strong>Check Purchase:</strong> Go to <a href="http://localhost:5128/Purchase" target="_blank">Purchases page</a> to see your purchase</li>
            <li><strong>Delete Event:</strong> Try deleting the event to test delete functionality</li>
        </ol>
    </div>
    
    <div class="step warning">
        <h3>🔍 Debug Information</h3>
        <p>If issues persist, check the terminal/console for debug messages:</p>
        <ul>
            <li><strong>Purchase:</strong> "Updated event X: AvailableTickets = Y"</li>
            <li><strong>Purchase:</strong> "Purchase saved successfully!"</li>
            <li><strong>Delete:</strong> "Deleting event X: EventName"</li>
            <li><strong>Delete:</strong> "Event deleted successfully!"</li>
        </ul>
    </div>
    
    <div class="step error">
        <h3>🚨 If Still Not Working</h3>
        <p>Check for these common issues:</p>
        <ul>
            <li><strong>Form validation errors:</strong> Make sure all required fields are filled</li>
            <li><strong>Quantity validation:</strong> Must be at least 1</li>
            <li><strong>Email format:</strong> Must be valid email format</li>
            <li><strong>Available tickets:</strong> Can't buy more than available</li>
        </ul>
    </div>
</body>
</html>
