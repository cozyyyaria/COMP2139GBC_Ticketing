<!DOCTYPE html>
<html>
<head>
    <title>Purchase Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .step { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; }
    </style>
</head>
<body>
    <h1>üîç Purchase Debug Test</h1>
    
    <div class="step info">
        <h3>Step 1: Check Events Page</h3>
        <p>Go to: <a href="http://localhost:5128/Event" target="_blank">http://localhost:5128/Event</a></p>
        <p>Look for events with "Buy" buttons and note the event ID</p>
    </div>
    
    <div class="step info">
        <h3>Step 2: Test Purchase Form</h3>
        <p>Click "Buy" on any event (e.g., <a href="http://localhost:5128/Purchase/Buy/2" target="_blank">http://localhost:5128/Purchase/Buy/2</a>)</p>
        <p>Fill out the form with:</p>
        <ul>
            <li><strong>Guest Name:</strong> Test User</li>
            <li><strong>Guest Email:</strong> test@example.com</li>
            <li><strong>Quantity:</strong> 2</li>
        </ul>
    </div>
    
    <div class="step warning">
        <h3>Step 3: Check for Errors</h3>
        <p>After clicking "Purchase", look for:</p>
        <ul>
            <li>Red error messages at the top of the form</li>
            <li>Red error messages under specific fields</li>
            <li>Browser console errors (press F12)</li>
        </ul>
    </div>
    
    <div class="step success">
        <h3>Step 4: Expected Result</h3>
        <p>If successful, you should:</p>
        <ul>
            <li>Be redirected to a confirmation page</li>
            <li>See purchase details (event, quantity, total cost)</li>
            <li>Go back to Events page and see available tickets decreased</li>
        </ul>
    </div>
    
    <div class="step error">
        <h3>üö® Common Issues</h3>
        <ul>
            <li><strong>Validation errors:</strong> Make sure all fields are filled correctly</li>
            <li><strong>Quantity validation:</strong> Must be between 1 and available tickets</li>
            <li><strong>Email format:</strong> Must be valid email (test@example.com)</li>
            <li><strong>Anti-forgery token:</strong> Form must be submitted from the actual page</li>
        </ul>
    </div>
    
    <div class="step info">
        <h3>üîç Debug Information</h3>
        <p>Check the terminal/console for debug messages:</p>
        <ul>
            <li><strong>Purchase received:</strong> "Received Purchase: EventId=X, GuestName=Y, GuestEmail=Z, Quantity=W"</li>
            <li><strong>Model validation:</strong> "ModelState.IsValid: True/False"</li>
            <li><strong>Validation errors:</strong> "ModelState Error - Key: X, Error: Y"</li>
            <li><strong>Success:</strong> "Purchase saved successfully!"</li>
        </ul>
    </div>
</body>
</html>
